{% extends "base_session.html.twig" %}

{% block title %}
Mi perfil
{% endblock %}

{% block stylesheets %}

{% endblock %}

{% block container %}

<div class="container well">
	{% if nombre is defined %} <h3 style="text-align:center; color:black;"> {{ nombre }} </h3> {% endif %}
	{% if email is defined %} <h4 style="text-align:center; color:black;"> {{ email }} </h4> {% endif %}
</div>
<div class="container well">
	<div class="row row-list">
		<div id="calificaciones" class="col-xs-2 col-md-2 col-lg-3">
			<a class="btn btn-primaryPink" href="index.php?action=mostrar_calificacion">Ver calificaciones detalladas</a>
			<br>
			<br>
			<!--cuando este la funcion de calificar, agregar con else aca-->
			{% if not calificacion_piloto is defined %}
				<p style="text-align: left; color:black;"> Calificacion como piloto = 0</p><cr>
				<p style="text-align: left; color:black;"> Total viajes = 0</p>
			{% endif %}
			{% if not calificacion_copiloto is defined %}
				<p style="text-align: left; color:black;"> Calificacion como copiloto = 0</p><cr>
				<p style="text-align: left; color:black;"> Total viajes = 0</p>
			{% endif %}
			<br>
		</div>
		<div id="historialViajes" class="col-xs-2 col-md-2 col-lg-2">
			<a class="btn btn-primaryPink" href="index.php?action=mostrar_perfil">Ver proximos viajes</a>
		</div>
		<div id="historialViajesPiloto" class="col-xs-2 col-md-2 col-lg-3">
			<a class="btn btn-primaryPink" href="index.php?action=mostrar_viajes_hechos">Mi historial de viajes</a>
		</div>
		<div id="listaVehiculos" class="col-xs-2 col-md-2 col-lg-2">
			<a class="btn btn-primaryPink" href="index.php?action=lista_vehiculos">Ver vehiculos</a>
		</div>
		<div id="registrarVehiculo" class="col-xs-2 col-md-2 col-lg-2">
			<a class="btn btn-primaryPink" href="index.php?action=registrar_vehiculo">Registrar Vehiculo</a>
		</div>
	</div>
	<div id="viajes_futuros">
		<div class="row">
			<div class="col-sm-12 col-sm-offset-0 text-center well">
				<h2>{{ tituloDinamico }}</h2>
				{% if viajes %}
					<table class="table table-striped">
						<thead>
							<tr>
								<th scope="col">Origen</th>
								<th scope="col">Destino</th>
								<th scope="col">Fecha</th>
								<th scope="col">Hora de salida</th>
								<th scope="col">Precio</th>
								<th scope="col">Duracion</th>
								<th scope="col">Distancia</th>
								<th scope="col">Ver detalles</th>
							</tr>
						</thead>
						<tbody>
							{% for viaje in viajes %}
								<tr>
									<td>{{ ciudades[viaje.origen_id - 1].nombre }}</td>
									<td>{{ ciudades[viaje.destino_id - 1].nombre }}</td>
									<td>{{ viaje.fecha }}</td>
									<td>{{ viaje.hora_salida }}hs</td>
									<td>$ {{ viaje.precio }}</td>
									<td>{{ viaje.duracion }} horas</td>
									<td>{{ viaje.distancia }} kms</td>
									<td>
										<form method="post" class="pull-left" action="index.php?action=ver_publicacion_viaje">
											<input type="hidden" name="id" value="{{ viaje.id }}">
											<input type="submit" class="btn btn-primaryPink"  value="Ver viaje">
										</form>
									</td>
									<!--<td>
										<form method="post" class="pull-left" action="index.php?action=modificar_viaje_ocasional">
											<input type="hidden" name="id" value="{{ viaje.id }}">
											<input type="submit" class="btn btn-primaryPink"  value="Modificar">
										</form>
									</td>
									<td>
										<form method="post" class="pull-center" action="index.php?action=eliminar_viaje&id={{ viaje.id }}">
											<input type="hidden" name="id" value="{{ viaje.id }}">
											<input type="submit" class="btn btn-primaryPink"  value="Eliminar">
										</form>
									</td>-->
								</tr>
							{% endfor %}
						</tbody>
					</table>
				{% else %}
					<h3>No hay viajes para mostrar</h3>
				{% endif %}
				
			</div>
		</div>
	</div>
	<div id="viajes_postulados">
		<div class="row">
			<div class="col-sm-12 col-sm-offset-0 text-center well">
				<h2>{{ tituloDinamico2 }}</h2>
				{% if postulaciones %}
					<table class="table table-striped">
						<thead>
							<tr>
								<th scope="col">Origen</th>
								<th scope="col">Destino</th>
								<th scope="col">Fecha</th>
								<th scope="col">Hora de salida</th>
								<th scope="col">Precio</th>
								<th scope="col">Duracion</th>
								<th scope="col">Distancia</th>
								<th scope="col">Estado de la postulacion</th>
								<th scope="col">Ver</th>
							</tr>
						</thead>
						<tbody>
							{% for postulacion in postulaciones %}
								<tr>
									<td>{{ ciudades[postulacion.origen_id - 1].nombre }}</td>
									<td>{{ ciudades[postulacion.destino_id - 1].nombre }}</td>
									<td>{{ postulacion.fecha }}</td>
									<td>{{ postulacion.hora_salida }}hs</td>
									<td>$ {{ postulacion.precio }}</td>
									<td>{{ postulacion.duracion }} horas</td>
									<td>{{ postulacion.distancia }} kms</td>
									<td>{{ postulacion.estado }}</td>
									<td>
										<form method="post" class="pull-left" action="index.php?action=ver_publicacion_viaje">
											<input type="hidden" name="id" value="{{ postulacion.viaje_id }}">
											<input type="submit" class="btn btn-primaryPink"  value="Ver viaje">
										</form>
									</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				{% else %}
					<h1>No tienes postulaciones</h1>
				{% endif %}
			</div>
		</div>
	</div>
</div>


{% endblock %}
